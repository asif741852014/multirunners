name: workflow1
on:
  push:
jobs:
  job1:
    runs-on: self-hosted
    steps:
    - name: step1
      uses: actions/checkout@v4
    - name: step2
      run: ls -larth
    - name: Fetch Runner Token
      run: |
          echo "Fetching runner token..."
          TOKEN=$(curl -X POST -H "Authorization: token ${{ secrets.PAT }}" \
          -H "Accept: application/vnd.github.v3+json" \
          https://api.github.com/repos/${{ github.repository }}/actions/runners/registration-token | jq -r .token)
          docker --version
          docker build --build-arg name=one --build-arg token=$TOKEN -t myfirst1:v1.0 .
          docker images
          docker run -d --name myfirst1 myfirst1:v1.0
          echo "the image got created and the container is running"
